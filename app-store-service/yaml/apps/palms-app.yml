---
application: v1

title: PALMS
name: palms
version: 1.0.0

tool:
  name: palms
  version: 1.0.0

authors:
- Dan Sebastian Thrane <dthrane@imada.sdu.dk>

description: >
  The central role of places in which physical activity (PA) is done is now
  widely recognized, so it is important to measure both activity and its
  location. At present, other than using the very expensive method of
  doubly-labeled water, if a researcher wants to measure PA in free living
  humans the most accurate technologies are either combined heart rate and
  motion (HR+M) sensors or accelerometers. But these devices do not collect
  data on where the activity occurs. If a researcher wants to know where a
  person performs physical activity, this information must be collected by
  means of self report after the PA has occurred. More recently, strategies
  utilizing ecological momentary assessment (EMA) have been used to sample
  behavioral experiences, including physical activity, in free living humans
  while they occur. However, this approach depends upon time- or
  event-critical sampling of self-reported information and thus continues to
  depend on self-report from the user to enter the information. Objective
  measurement of walking and cycling using portable global positioning system
  (GPS) devices has been successful but GPS data have yet to be combined with
  highly accurate PA measurement in a way that can be used across settings
  and populations.

invocation:
- parms

- type: var
  vars:
  - input
  prefixVariable: "-i "

- -o output.json

- type: var
  vars:
  - interval
  prefixVariable: "--interval "

- type: var
  vars:
  - insert_missing
  prefixVariable: "--insert_missing "

- type: var
  vars:
  - insert_until
  prefixVariable: "--insert_until "

- type: var
  vars:
  - insert_max_seconds
  prefixVariable: "--insert_max_seconds "

- type: var
  vars:
  - los_max_duration
  prefixVariable: "--los_max_duration "

- type: var
  vars:
  - remove_lone
  prefixVariable: "--remove_lone "

- type: var
  vars:
  - filter_invalid
  prefixVariable: "--filter_invalid "

- type: var
  vars:
  - max_speed
  prefixVariable: "--max_speed "

- type: var
  vars:
  - max_ele_change
  prefixVariable: "--max_ele_change "

- type: var
  vars:
  - min_change_3_fixes
  prefixVariable: "--min_change_3_fixes "

- type: var
  vars:
  - detect_indoors
  prefixVariable: "--detect_indoors "

- type: var
  vars:
  - min_distance
  prefixVariable: "--min_distance "

- type: var
  vars:
  - min_trip_length
  prefixVariable: "--min_trip_length "

- type: var
  vars:
  - min_trip_duration
  prefixVariable: "--min_trip_duration "

- type: var
  vars:
  - min_pause_duration
  prefixVariable: "--min_pause_duration "

- type: var
  vars:
  - max_pause_duration
  prefixVariable: "--max_pause_duration "

- type: var
  vars:
  - max_percent_single_location
  prefixVariable: "--max_percent_single_location "

- type: var
  vars:
  - max_percent_allowed_indoors
  prefixVariable: "--max_percent_allowed_indoors "

- type: var
  vars:
  - remove_indoor_fixes
  prefixVariable: "--remove_indoor_fixes "

- type: var
  vars:
  - include_trip_pauses
  prefixVariable: "--include_trip_pauses "

- type: var
  vars:
  - trap_indoor_fixes
  prefixVariable: "--trap_indoor_fixes "

- type: var
  vars:
  - trap_outdoor_fixes
  prefixVariable: "--trap_outdoor_fixes "

- type: var
  vars:
  - trap_trip_fixes
  prefixVariable: "--trap_trip_fixes "

- type: var
  vars:
  - allow_non_trips
  prefixVariable: "--allow_non_trips "

- type: var
  vars:
  - location_radius
  prefixVariable: "--location_radius "

- type: var
  vars:
  - min_duration_at_location
  prefixVariable: "--min_duration_at_location "

- type: var
  vars:
  - vehicle_cutoff
  prefixVariable: "--vehicle_cutoff "

- type: var
  vars:
  - bicycle_cutoff
  prefixVariable: "--bicycle_cutoff "

- type: var
  vars:
  - walk_cutoff
  prefixVariable: "--walk_cutoff "

- type: var
  vars:
  - percentile_to_sample
  prefixVariable: "--percentile_to_sample "

- type: var
  vars:
  - min_segment_length
  prefixVariable: "--min_segment_length "

parameters:
  input:
    name: "input"
    optional: false
    defaultValue: null
    title: "Input File"
    description: ""
    type: "input_file"

  interval:
    name: "interval"
    optional: true
    defaultValue: null
    title: "Interval"
    description: "duration of interval between results in seconds"
    min: null
    max: null
    step: null
    unitName: "seconds"
    type: "integer"
    
  insert_missing:
    name: "insert_missing"
    optional: true
    defaultValue: null
    title: "Insert missing"
    description: "if true, gaps in GPS fixes are replaced by the last valid fix"
    trueValue: "true"
    falseValue: "false"
    type: "boolean"
    
  insert_until:
    name: "insert_until"
    optional: true
    defaultValue: null
    title: "Insert until"
    description: "if true, inserts until a max time is reached"
    trueValue: "true"
    falseValue: "false"
    type: "boolean"
    
  insert_max_seconds:
    name: "insert_max_seconds"
    optional: true
    defaultValue: null
    title: "Insert max seconds"
    description: "max number of seconds to replace missing fixes with last valid fix"
    trueValue: "true"
    falseValue: "false"
    type: "boolean"
    
  los_max_duration:
    name: "los_max_duration"
    optional: true
    defaultValue: null
    title: "Loss of Signal (Max duration)"
    description: "max amount of time allowed to pass before Loss of Signal is declared"
    min: null
    max: null
    step: null
    unitName: "seconds"
    type: "integer"
    
  remove_lone:
    name: "remove_lone"
    optional: true
    defaultValue: null
    title: "Remove lone"
    description: "if true, removes lone fixes"
    trueValue: "true"
    falseValue: "false"
    type: "boolean"
    
  filter_invalid:
    name: "filter_invalid"
    optional: true
    defaultValue: null
    title: "Filter invalid"
    description: "if true, removes invalid fixes"
    trueValue: "true"
    falseValue: "false"
    type: "boolean"
    
  max_speed:
    name: "max_speed"
    optional: true
    defaultValue: null
    title: "Max speed"
    description: "Consider fix invalid if speed is greater than this value (in km/hr)"
    min: null
    max: null
    step: null
    unitName: "km/hr"
    type: "integer"
    
  max_ele_change:
    name: "max_ele_change"
    optional: true
    defaultValue: null
    title: "Maximum elevation change"
    description: "Consider fix invalid if elevation change is greater than this value\
      \ (in meters)"
    min: null
    max: null
    step: null
    unitName: "meters"
    type: "integer"
    
  min_change_3_fixes:
    name: "min_change_3_fixes"
    optional: true
    defaultValue: null
    title: "min_change_3_fixes"
    description: "Consider fix invalid if change in distance between fix 1 and 3 is\
      \ less than this value (in meters). This helps remove GPS jitter."
    trueValue: "true"
    falseValue: "false"
    type: "boolean"
    
  detect_indoors:
    name: "detect_indoors"
    optional: true
    defaultValue: null
    title: "Detect indoors"
    description: "If true, mark position as indoors, outdoors or in-vehicle"
    trueValue: "true"
    falseValue: "false"
    type: "boolean"
    
  max_sat_ratio:
    name: "max_sat_ratio"
    optional: true
    defaultValue: null
    title: "max_sat_ratio"
    description: ""
    min: null
    max: null
    step: null
    unitName: null
    type: "integer"
    
  max_SNR_value:
    name: "max_SNR_value"
    optional: true
    defaultValue: null
    title: "max_SNR_value"
    description: ""
    min: null
    max: null
    step: null
    unitName: null
    type: "integer"
    
  min_distance:
    name: "min_distance"
    optional: true
    defaultValue: null
    title: "Minimum distance"
    description: "minimum distance (in meters) that must be travelled over one minute\
      \ to indicate the start of a trip. Default chosen to be 34 meters which is equal\
      \ to a typical walking speed of 2KM/hr."
    min: null
    max: null
    step: null
    unitName: "km/hr"
    type: "integer"
    
  min_trip_length:
    name: "min_trip_length"
    optional: true
    defaultValue: null
    title: "Minimum trip length"
    description: "trips less than this distance (in meters) are not considered trips."
    min: null
    max: null
    step: null
    unitName: "meters"
    type: "integer"
    
  min_trip_duration:
    name: "min_trip_duration"
    optional: true
    defaultValue: null
    title: "Minimum trip duration"
    description: "trips less than this duration (in seconds) are not considered trips."
    min: null
    max: null
    step: null
    unitName: "seconds"
    type: "integer"
    
  min_pause_duration:
    name: "min_pause_duration"
    optional: true
    defaultValue: null
    title: "Minimum pause duration"
    description: "trips less than this duration (in seconds) are not considered trips."
    min: null
    max: null
    step: null
    unitName: "seconds"
    type: "integer"
    
  max_pause_duration:
    name: "max_pause_duration"
    optional: true
    defaultValue: null
    title: "Maximum pause duration"
    description: " when the duration of a pause exceeds this value, the point is marked\
      \ as an end point."
    min: null
    max: null
    step: null
    unitName: null
    type: "integer"
    
  max_percent_single_location:
    name: "max_percent_single_location"
    optional: true
    defaultValue: null
    title: "max_percent_single_location"
    description: "maximum percentage of a trip's fixes that can occur at a single location."
    min: 0
    max: 100
    step: null
    unitName: "%"
    type: "integer"
    
  max_percent_allowed_indoors:
    name: "max_percent_allowed_indoors"
    optional: true
    defaultValue: null
    title: "max_percent_allowed_indoors"
    description: "maximum percentage of a trip that is allowed indoors."
    min: 0
    max: 100
    step: null
    unitName: "%"
    type: "integer"
    
  remove_indoor_fixes:
    name: "remove_indoor_fixes"
    optional: true
    defaultValue: null
    title: "remove_indoor_fixes"
    description: "if true, points at the start and end of a trip that are marked indoors\
      \ are removed from the trip."
    trueValue: "true"
    falseValue: "false"
    type: "boolean"
    
  include_trip_pauses:
    name: "include_trip_pauses"
    optional: true
    defaultValue: null
    title: "include_trip_pauses"
    description: "if true, include trip pause points as locations."
    trueValue: "true"
    falseValue: "false"
    type: "boolean"
    
  trap_indoor_fixes:
    name: "trap_indoor_fixes"
    optional: true
    defaultValue: null
    title: "trap_indoor_fixes"
    description: "if true, stationary indoor fixes within a given radius of the location\
      \ will be set to the center of the location."
    trueValue: "true"
    falseValue: "false"
    type: "boolean"
    
  trap_outdoor_fixes:
    name: "trap_outdoor_fixes"
    optional: true
    defaultValue: null
    title: "trap_outdoor_fixes"
    description: "if true, stationary outdoor fixes will be set to the location center."
    trueValue: "true"
    falseValue: "false"
    type: "boolean"
    
  trap_trip_fixes:
    name: "trap_trip_fixes"
    optional: true
    defaultValue: null
    title: "trap_trip_fixes"
    description: "if true, also include fixes that are part of trips."
    trueValue: "true"
    falseValue: "false"
    type: "boolean"
    
  allow_non_trips:
    name: "allow_non_trips"
    optional: true
    defaultValue: null
    title: "allow_non_trips"
    description: "if true, locations may be included that are not part of a trip."
    trueValue: "true"
    falseValue: "false"
    type: "boolean"
    
  location_radius:
    name: "location_radius"
    optional: true
    defaultValue: null
    title: "location_radius"
    description: "defines radius (in meters) of location in which fixes are trapped."
    min: null
    max: null
    step: null
    unitName: "meters"
    type: "integer"
    
  min_duration_at_location:
    name: "min_duration_at_location"
    optional: true
    defaultValue: null
    title: "min_duration_at_location"
    description: "minimum amount of time (in seconds) that must be spent at a location\
      \ for it to be considered a location."
    min: null
    max: null
    step: null
    unitName: "seconds"
    type: "integer"
    
  vehicle_cutoff:
    name: "vehicle_cutoff"
    optional: true
    defaultValue: null
    title: "vehicle_cutoff"
    description: "speeds greater than this value (in KM/hr) will be marked as vehicle."
    min: null
    max: null
    step: null
    unitName: "km/hr"
    type: "integer"
    
  bicycle_cutoff:
    name: "bicycle_cutoff"
    optional: true
    defaultValue: null
    title: "bicycle_cutoff"
    description: "speeds greater than this value (in KM/hr) will be marked as bicycle."
    min: null
    max: null
    step: null
    unitName: "km/hr"
    type: "integer"
    
  walk_cutoff:
    name: "walk_cutoff"
    optional: true
    defaultValue: null
    title: "walk_cutoff"
    description: "speeds greater than this value (in KM/hr) will be marked as pedestrian."
    min: null
    max: null
    step: null
    unitName: "km/hr"
    type: "integer"
    
  percentile_to_sample:
    name: "percentile_to_sample"
    optional: true
    defaultValue: null
    title: "percentile_to_sample"
    description: "speed comparisons are made at this percentile."
    min: null
    max: null
    step: null
    unitName: null
    type: "integer"
    
  min_segment_length:
    name: "min_segment_length"
    optional: true
    defaultValue: null
    title: "min_segment_length"
    description: "minimum length (in meters) of segments used to classify mode of transportation."
    min: null
    max: null
    step: null
    unitName: "meters"
    type: "integer"